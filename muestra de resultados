
# =====================================================
# ===============   FUNCI√ìN DE ENTRADA   ===============
# =====================================================

def leer_datos():
    """
    Solicita al usuario los par√°metros iniciales del problema.

    Retorna:
        n   (int): N√∫mero total de puntos (incluye el dep√≥sito).
        cap (int): Capacidad m√°xima de paquetes por conductor.
        P   (int): Total de paquetes a repartir.
    """
    while True:
        try:
            n_txt = input("Ingrese el n√∫mero total de puntos (incluyendo el dep√≥sito): ").strip()
            cap_txt = input("Ingrese la capacidad m√°xima de paquetes por conductor: ").strip()
            P_txt = input("Ingrese el total de paquetes a repartir: ").strip()

            n = int(n_txt)
            cap = int(cap_txt)
            P = int(P_txt)

            # Validaciones b√°sicas
            if n <= 1:
                raise ValueError("El n√∫mero de puntos debe ser mayor que 1.")
            if cap <= 0:
                raise ValueError("La capacidad debe ser positiva.")
            if P <= 0:
                raise ValueError("El total de paquetes debe ser positivo.")

            break

        except ValueError as e:
            print(f"Error: {e} Intente de nuevo.\n")
            continue

    print("\nDatos ingresados correctamente:")
    print(f"‚Üí N√∫mero de puntos: {n}")
    print(f"‚Üí Capacidad por conductor: {cap}")
    print(f"‚Üí Total de paquetes: {P}\n")
    return n, cap, P


# =====================================================
# ============   C√ÅLCULO DE M√âTRICAS   ================
# =====================================================

def calcular_metricas(rutas, matriz_distancias, paquetes_por_punto, velocidad=1):
    """
    Calcula m√©tricas de distancia, paquetes y tiempo para cada ruta asignada.

    Par√°metros:
        rutas (list): Lista de rutas. Ejemplo: [[0, 2, 5, 0], [0, 1, 3, 0]]
        matriz_distancias (list[list]): Matriz n√ón de distancias entre puntos.
        paquetes_por_punto (list[int]): Paquetes asignados a cada punto.
        velocidad (float): Velocidad promedio del conductor.

    Retorna:
        list[dict]: Lista con resultados por conductor.
    """
    resultados = []

    for idx, ruta in enumerate(rutas):
        distancia_total = 0
        paquetes_transportados = 0

        # Sumar distancias entre cada par consecutivo de puntos
        for i in range(len(ruta) - 1):
            distancia_total += matriz_distancias[ruta[i]][ruta[i + 1]]

        # Sumar paquetes transportados (omitiendo dep√≥sito 0)
        for punto in ruta:
            if punto != 0:
                paquetes_transportados += paquetes_por_punto[punto]

        tiempo_estimado = distancia_total / velocidad

        resultados.append({
            "conductor": idx + 1,
            "ruta": ruta,
            "distancia_total": distancia_total,
            "paquetes": paquetes_transportados,
            "tiempo": tiempo_estimado
        })

    return resultados


# =====================================================
# ============   VISUALIZACI√ìN FINAL   ================
# =====================================================

def mostrar_metricas(resultados):
    """
    Muestra en consola las m√©tricas obtenidas para cada ruta.
    """
    print("\n========== RESULTADOS DE LAS RUTAS ==========\n")

    for r in resultados:
        print(f"üöö Conductor #{r['conductor']}")
        print(f"  ‚û§ Ruta: {r['ruta']}")
        print(f"  ‚û§ Distancia total: {r['distancia_total']} unidades")
        print(f"  ‚û§ Paquetes transportados: {r['paquetes']}")
        print(f"  ‚û§ Tiempo estimado: {r['tiempo']:.2f} unidades de tiempo")
        print("---------------------------------------------")


# =====================================================
# ============   EJEMPLO DE EJECUCI√ìN   ===============
# =====================================================

if __name__ == "__main__":
    print("=== SISTEMA DE M√âTRICAS DE RUTAS DE MENSAJER√çA ===\n")

    # Entrada de datos
    n, cap, P = leer_datos()

    # Ejemplo de matriz de distancias (puedes reemplazarla con datos reales)
    matriz_distancias = [
        [0, 4, 6, 8, 5, 7],
        [4, 0, 3, 5, 7, 6],
        [6, 3, 0, 2, 4, 5],
        [8, 5, 2, 0, 6, 3],
        [5, 7, 4, 6, 0, 2],
        [7, 6, 5, 3, 2, 0]
    ]

    # Ejemplo de paquetes asignados a cada punto (√≠ndice = punto)
    paquetes_por_punto = [0, 3, 4, 2, 5, 1]

    # Ejemplo de rutas calculadas previamente
    rutas = [
        [0, 2, 3, 0],
        [0, 1, 4, 5, 0]
    ]

    # C√°lculo y visualizaci√≥n
    resultados = calcular_metricas(rutas, matriz_distancias, paquetes_por_punto)
    mostrar_metricas(resultados)
